---
- hosts: dev
  become: yes
  become_method: sudo
  tasks:

  - name: Install EPEL repo.
    yum:
      name: https://dl.fedoraproject.org/pub/epel/epel-release-latest-{{ ansible_distribution_major_version }}.noarch.rpm
      state: present

  - name: Import EPEL GPG key.
    rpm_key:
      key: /etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-{{ ansible_distribution_major_version }}
      state: present

  - name: Install remi repo.
    yum:
      name: http://rpms.famillecollet.com/enterprise/remi-release-{{ ansible_distribution_major_version }}.rpm
      state: present

  - name: Import remi GPG key.
    rpm_key:
      key: http://rpms.remirepo.net/RPM-GPG-KEY-remi
      state: present

  - name: Install the 'Development tools' package group
    yum:
      name: "@Development tools"
      state: present

  - name: Install network time protocol
    yum:
      name: ntp
      state: present

  - name: set timezone to Asia/Hong_Kong
    timezone:
      name: Asia/Hong_Kong

  - name: Install wget
    yum:
      name: wget
      state: present

  - name: Stop firwalld service
    command: systemctl stop firewalld.service

  - name: Disable firwalld service
    command: systemctl disable firewalld.service

  # Disable SELinux
  - selinux:
      state: disabled

  - name: List ansible packages and register result to print with debug later.
    yum:
      list: ansible
    register: result
